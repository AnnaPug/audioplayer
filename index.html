<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Genially Audio Player Editor</title>

<style>
:root {
  --main: #7b5cff;
  --accent: #b69cff;
  --bg: transparent;
  --text: #ffffff;
}

* {
  box-sizing: border-box;
  font-family: Inter, system-ui, sans-serif;
}

body {
  margin: 0;
  background: #0f0c1d;
  color: white;
}

.wrapper {
  display: grid;
  grid-template-columns: 320px 1fr;
  gap: 24px;
  padding: 24px;
}

.panel {
  background: #18142f;
  border-radius: 16px;
  padding: 16px;
}

.panel h2 {
  margin-top: 0;
  font-size: 16px;
}

.panel label {
  font-size: 12px;
  opacity: .8;
}

.panel input, .panel select, .panel textarea {
  width: 100%;
  margin: 6px 0 14px;
  padding: 8px;
  border-radius: 8px;
  border: none;
}

.panel textarea {
  resize: vertical;
  height: 80px;
}

button {
  width: 100%;
  padding: 10px;
  border-radius: 10px;
  border: none;
  background: var(--main);
  color: white;
  font-weight: 600;
  cursor: pointer;
}

button:hover {
  opacity: .9;
}

/* ===== PLAYER ===== */

.player {
  width: 320px;
  background: linear-gradient(160deg, var(--main), #9a85ff);
  border-radius: 20px;
  padding: 16px;
  box-shadow: 0 10px 30px rgba(123,92,255,0.4);
}

.cover {
  width: 100%;
  height: 160px;
  border-radius: 14px;
  background-size: cover;
  background-position: center;
  margin-bottom: 10px;
}

.title {
  font-size: 14px;
  font-weight: 600;
}

.progress {
  height: 6px;
  background: rgba(255,255,255,0.3);
  border-radius: 6px;
  margin: 10px 0;
  cursor: pointer;
}

.progress-bar {
  height: 100%;
  width: 0%;
  background: white;
  border-radius: 6px;
}

.controls {
  display: flex;
  justify-content: space-between;
}

.controls button {
  width: auto;
  background: none;
  font-size: 18px;
}

.playlist {
  display: none;
  margin-top: 10px;
}

.track {
  font-size: 13px;
  padding: 4px;
  cursor: pointer;
}

.track.active {
  font-weight: bold;
}
</style>
</head>

<body>

<div class="wrapper">

  <!-- EDITOR -->
  <div class="panel">
    <h2>üéõ –†–µ–¥–∞–∫—Ç–æ—Ä –ø–ª–µ–µ—Ä–∞</h2>

    <label>–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç</label>
    <input type="color" id="color" value="#7b5cff">

    <label>–Ø–∑—ã–∫</label>
    <select id="lang">
      <option value="ru">–†—É—Å—Å–∫–∏–π</option>
      <option value="en">English</option>
    </select>

    <label>–°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±–ª–æ–∂–∫—É</label>
    <input id="coverInput" placeholder="https://..." />

    <label>–°—Å—ã–ª–∫–∏ –Ω–∞ —Ç—Ä–µ–∫–∏ (raw GitHub, –ø–æ –æ–¥–Ω–æ–π –≤ —Å—Ç—Ä–æ–∫–µ)</label>
    <textarea id="tracksInput">
https://raw.githubusercontent.com/AnnaPug/audioplayer/main/audio/track1.mp3
https://raw.githubusercontent.com/AnnaPug/audioplayer/main/audio/track2.mp3
    </textarea>

    <button onclick="generate()">üëÄ –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
    <br><br>
    <button onclick="getCode()">üìã –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</button>
  </div>

  <!-- PREVIEW -->
  <div>
    <div id="preview"></div>

    <textarea id="result" style="width:100%;height:220px;margin-top:16px;display:none;"></textarea>
  </div>

</div>

<script>
function generate() {
  const color = colorInput.value;
  document.documentElement.style.setProperty("--main", color);

  const cover = coverInput.value || "https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4";
  const tracks = tracksInput.value.trim().split("\n");

  preview.innerHTML = `
<div class="player">
  <div class="cover" style="background-image:url('${cover}')"></div>
  <div class="title" id="title">Track</div>
  <div class="progress" onclick="seek(event)">
    <div class="progress-bar" id="bar"></div>
  </div>
  <div class="controls">
    <button onclick="prev()">‚èÆ</button>
    <button onclick="play()">‚ñ∂</button>
    <button onclick="next()">‚è≠</button>
    <button onclick="toggle()">‚ò∞</button>
  </div>
  <div class="playlist" id="list"></div>
</div>
<audio id="audio"></audio>
`;

  window.tracks = tracks;
  window.index = 0;
  audio.src = tracks[0];
  title.textContent = tracks[0].split("/").pop();
  buildList();
}

function play() {
  audio.paused ? audio.play() : audio.pause();
}

function next() {
  index = (index + 1) % tracks.length;
  audio.src = tracks[index];
  audio.play();
  title.textContent = tracks[index].split("/").pop();
}

function prev() {
  index = (index - 1 + tracks.length) % tracks.length;
  audio.src = tracks[index];
  audio.play();
  title.textContent = tracks[index].split("/").pop();
}

function toggle() {
  list.style.display = list.style.display === "block" ? "none" : "block";
}

function seek(e) {
  audio.currentTime = (e.offsetX / e.target.offsetWidth) * audio.duration;
}

audio?.addEventListener("timeupdate", () => {
  bar.style.width = (audio.currentTime / audio.duration) * 100 + "%";
});

function buildList() {
  list.innerHTML = "";
  tracks.forEach((t, i) => {
    const div = document.createElement("div");
    div.className = "track";
    div.textContent = t.split("/").pop();
    div.onclick = () => {
      index = i;
      audio.src = t;
      audio.play();
    };
    list.appendChild(div);
  });
}

function getCode() {
  result.style.display = "block";
  result.value = preview.innerHTML;
}

generate();
</script>

</body>
</html>
